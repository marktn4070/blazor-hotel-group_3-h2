@page "/login"
@using Blazor.Components
@using Blazor.Services
@inject AuthenticationService AuthService
@inject NavigationManager Navigation

<PageTitle>Log ind - Suite Dreams</PageTitle>

<div class="modern-login-page">
    <!-- Animated Background -->
    <div class="login-background">
    </div>

    <div class="login-container">
        <div class="login-content">
            <!-- Brand Header -->
            <div class="brand-header">
                <h1 class="brand-title">Login</h1>
            </div>

            <!-- Login Form Container -->
            <div class="form-container">
                <LoginForm OnLoginSuccess="HandleLoginSuccess" />
            </div>

            <!-- Footer -->
            <div class="login-footer">
                <a href="/" class="back-link">
                    <i class="bi bi-arrow-left"></i>
                    Back to homepage
                </a>
            </div>
        </div>
    </div>
</div>


@code {
    protected override async Task OnInitializedAsync()
    {
        // Hvis brugeren allerede er logget ind, redirect til forsiden
        if (await AuthService.IsAuthenticatedAsync())
        {
            Navigation.NavigateTo("/");
        }
    }

    private async Task HandleLoginSuccess()
    {
        // Denne metode kaldes når login er succesfuldt
        // Navigation sker allerede i LoginForm komponenten
        await Task.CompletedTask;
    }
}